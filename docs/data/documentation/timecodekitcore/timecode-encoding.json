{"variants":[{"traits":[{"interfaceLanguage":"swift"}],"paths":["\/documentation\/timecodekitcore\/timecode-encoding"]}],"identifier":{"url":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode-Encoding","interfaceLanguage":"swift"},"metadata":{"role":"collectionGroup","modules":[{"name":"TimecodeKitCore"}],"title":"Encoding","roleHeading":"API Collection"},"abstract":[{"text":"Encoding and Decoding timecode for the pasteboard and drag events.","type":"text"}],"schemaVersion":{"major":0,"minor":3,"patch":0},"primaryContentSections":[{"kind":"content","content":[{"level":2,"type":"heading","text":"Overview","anchor":"overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"TimecodeKit includes support for encoding and decoding "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","isActive":true,"type":"reference"},{"text":" instances and timecode strings when:","type":"text"}]},{"items":[{"content":[{"inlineContent":[{"text":"copying to the pasteboard \/ pasting from the pasteboard","type":"text"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"drag & drop operations","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"},{"anchor":"UT-Types","type":"heading","level":2,"text":"UT Types"},{"type":"paragraph","inlineContent":[{"type":"text","text":"To support exchange of "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","type":"reference","isActive":true},{"text":" instances, your app needs to export its UT Type.","type":"text"}]},{"type":"orderedList","items":[{"content":[{"inlineContent":[{"type":"text","text":"In the app project, select your appâ€™s target and switch to the Info tab"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"text":"Open the ","type":"text"},{"type":"strong","inlineContent":[{"text":"Exported Type Identifiers","type":"text"}]},{"text":" section","type":"text"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"Add a new entry by clicking the ","type":"text"},{"code":"+","type":"codeVoice"},{"text":" button","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"text","text":"Enter the following data in the corresponding fields:"}],"type":"paragraph"},{"rows":[[[{"inlineContent":[{"text":"Field","type":"text"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"text":"Content","type":"text"}]}]],[[{"type":"paragraph","inlineContent":[{"text":"Description","type":"text"}]}],[{"type":"paragraph","inlineContent":[{"code":"Timecode","type":"codeVoice"}]}]],[[{"inlineContent":[{"type":"text","text":"Identifier"}],"type":"paragraph"}],[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"com.orchetect.TimecodeKit.timecode"}]}]]],"type":"table","header":"row"}]}]},{"type":"paragraph","inlineContent":[{"type":"image","identifier":"app-target-exported-types.png"}]},{"text":"NSItemProvider","anchor":"NSItemProvider","type":"heading","level":2},{"inlineContent":[{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","type":"reference","isActive":true},{"type":"text","text":" supports encoding and decoding timecode using one or more "},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsitemprovider","type":"reference"},{"type":"text","text":" instances."}],"type":"paragraph"},{"inlineContent":[{"text":"In AppKit, UIKit and SwiftUI, ","type":"text"},{"isActive":true,"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsitemprovider","type":"reference","overridingTitleInlineContent":[{"code":"NSItemProvider","type":"codeVoice"}],"overridingTitle":"NSItemProvider"},{"type":"text","text":" is used commonly to exchange content with the pasteboard."}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"text":"When using the associated methods, timecode will generate two item providers:","type":"text"}]},{"type":"unorderedList","items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"A plain-text timecode string"}]}]},{"content":[{"inlineContent":[{"text":"A lossless JSON-encoded representation","type":"text"}],"type":"paragraph"}]}]},{"inlineContent":[{"text":"This means that the end-user is able to:","type":"text"}],"type":"paragraph"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"text":"paste or drag as a timecode string to any 3rd-party application that can receive plain-text","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"text","text":"paste or drag to paste destinations within your app that accept the "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/UniformTypeIdentifiers\/UTType\/timecode","type":"reference","isActive":true},{"text":" UT Type","type":"text"}]}]}],"type":"unorderedList"},{"code":["struct TimecodeListView: View {","    @State var model: [Timecode]","    @State var selection: Timecode","    ","    var body: some View {","        List(selection: $selection) {","            ForEach(model) { item in","                Text(item.stringValue()).tag(item)","            }","        }","        .onCopyCommand {","            selection.itemProviders()","        }","        .onPasteCommand(of: [.timecode]) { itemProviders in","            Task {","                try await add(itemFrom: itemProviders)","            }","        }","    }","    ","    func add(itemFrom itemProviders: [NSItemProvider]) async throws {","        \/\/ Provide default properties in case only a timecode string is present,","        \/\/ which could be the case if the user copies a plain-text timecode string","        \/\/ from another application. If the timecode data on the pasteboard was","        \/\/ originally created using Timecode's itemProviders() method, then","        \/\/ these properties will be ignored, as the pasteboard will contain lossless","        \/\/ data with which to decode to the new Timecode instance.","        let properties = Timecode.Properties(rate: .fps24)","        let timecode = try await Timecode(","            from: itemProviders,","            propertiesForString: properties","        )","        ","        \/\/ Timecode's default Identifiable implementation uses self","        \/\/ which means we cannot have two identical timecodes in a SwiftUI array","        if !model.contains(timecode) { model.append(timecode) }","    }","}"],"type":"codeListing","syntax":"swift"},{"text":"Transferable","type":"heading","level":2,"anchor":"Transferable"},{"type":"paragraph","inlineContent":[{"type":"reference","isActive":true,"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode"},{"type":"text","text":" conforms to the "},{"identifier":"https:\/\/developer.apple.com\/documentation\/coretransferable\/transferable","isActive":true,"type":"reference"},{"text":" protocol which allows instances to be dragged & dropped or copied to\/from the clipboard using declarative SwiftUI syntax.","type":"text"}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"The following example demonstrates a timecode list that supports copy and paste as well as drag and drop in order to copy items to another paste destination (such as a second instance of this view)."}]},{"code":["struct TimecodeListView: View {","    @State var model: [Timecode]","    @State var selection: Timecode","    ","    var body: some View {","        List(selection: $selection) {","            ForEach(model) { item in","                Text(item.stringValue()).tag(item)","            }","            .dropDestination(for: Timecode.self) { items, location in","                add(items: items)","                return true","            }","        }","        .copyable([selection])","        .pasteDestination(for: Timecode.self) { items in","            add(items: items)","        }","    }","    ","    func add(items: [Timecode]) {","        \/\/ Timecode's default Identifiable implementation uses self","        \/\/ which means we cannot have two identical timecodes in a SwiftUI array","        items.forEach {","            if !model.contains($0) { model.append($0) }","        }","    }","}"],"type":"codeListing","syntax":"swift"},{"name":"Important","type":"aside","content":[{"type":"paragraph","inlineContent":[{"text":"","type":"text"}]},{"type":"paragraph","inlineContent":[{"text":"If SwiftUI methods using the ","type":"text"},{"identifier":"https:\/\/developer.apple.com\/documentation\/coretransferable\/transferable","overridingTitle":"Transferable","overridingTitleInlineContent":[{"code":"Transferable","type":"codeVoice"}],"type":"reference","isActive":true},{"type":"text","text":" protocol are invoked without exporting this UT Type, this error will be thrown:"}]},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Type \"com.orchetect.TimecodeKit.timecode\" was expected to be declared and exported in the Info.plist of MyApp.app, but it was not found."}]},{"type":"paragraph","inlineContent":[{"type":"text","text":"See UT Types section above for information on how to export this type in your app."}]}],"style":"important"}]}],"kind":"article","hierarchy":{"paths":[["doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore"]]},"sections":[],"topicSections":[{"title":"NSItemProvider","identifiers":["doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/init(from:propertiesForString:)-7hl9l","doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/init(from:propertiesForString:)-1cqhu","doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/itemProviders(stringFormat:)"],"anchor":"NSItemProvider"},{"identifiers":["doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/transferRepresentation"],"anchor":"Transferable","title":"Transferable"},{"identifiers":["doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/UniformTypeIdentifiers\/UTType\/timecode","doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/textUTType","doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/copyUTTypes","doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/pasteUTTypes"],"anchor":"UT-Types","title":"UT Types"}],"references":{"doc://TimecodeKitCore/documentation/TimecodeKitCore/UniformTypeIdentifiers/UTType/timecode":{"title":"timecode","kind":"symbol","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/UniformTypeIdentifiers\/UTType\/timecode","url":"\/documentation\/timecodekitcore\/uniformtypeidentifiers\/uttype\/timecode","abstract":[{"type":"text","text":"UT Type defined in TimecodeKit to globally identify "},{"type":"reference","isActive":true,"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode"},{"text":" instances.","type":"text"}],"type":"topic","role":"symbol","fragments":[{"text":"static","kind":"keyword"},{"kind":"text","text":" "},{"text":"let","kind":"keyword"},{"kind":"text","text":" "},{"text":"timecode","kind":"identifier"},{"text":": ","kind":"text"},{"text":"UTType","kind":"typeIdentifier","preciseIdentifier":"s:22UniformTypeIdentifiers6UTTypeV"}]},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode":{"abstract":[{"type":"text","text":"Value type representing SMPTE\/EBU timecode."}],"role":"symbol","title":"Timecode","kind":"symbol","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","navigatorTitle":[{"kind":"identifier","text":"Timecode"}],"url":"\/documentation\/timecodekitcore\/timecode","type":"topic","fragments":[{"text":"struct","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Timecode","kind":"identifier"}]},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/itemProviders(stringFormat:)":{"abstract":[{"type":"text","text":"Generates item providers for copying the "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","type":"reference","isActive":true},{"type":"text","text":" instance to the pasteboard."}],"kind":"symbol","role":"symbol","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/itemProviders(stringFormat:)","type":"topic","fragments":[{"text":"func","kind":"keyword"},{"kind":"text","text":" "},{"text":"itemProviders","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"stringFormat"},{"kind":"text","text":": "},{"text":"Timecode","kind":"typeIdentifier","preciseIdentifier":"s:15TimecodeKitCore0A0V"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:15TimecodeKitCore0A0V12StringFormata","text":"StringFormat"},{"text":") -> [","kind":"text"},{"preciseIdentifier":"c:objc(cs)NSItemProvider","text":"NSItemProvider","kind":"typeIdentifier"},{"text":"]","kind":"text"}],"title":"itemProviders(stringFormat:)","url":"\/documentation\/timecodekitcore\/timecode\/itemproviders(stringformat:)"},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/transferRepresentation":{"abstract":[],"url":"\/documentation\/timecodekitcore\/timecode\/transferrepresentation","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/transferRepresentation","title":"transferRepresentation","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"var"},{"text":" ","kind":"text"},{"kind":"identifier","text":"transferRepresentation"},{"kind":"text","text":": "},{"text":"some","kind":"keyword"},{"kind":"text","text":" "},{"text":"TransferRepresentation","kind":"typeIdentifier","preciseIdentifier":"s:16CoreTransferable22TransferRepresentationP"}],"role":"symbol","type":"topic","kind":"symbol"},"https://developer.apple.com/documentation/coretransferable/transferable":{"identifier":"https:\/\/developer.apple.com\/documentation\/coretransferable\/transferable","titleInlineContent":[{"code":"Transferable","type":"codeVoice"}],"type":"link","title":"Transferable","url":"https:\/\/developer.apple.com\/documentation\/coretransferable\/transferable"},"app-target-exported-types.png":{"identifier":"app-target-exported-types.png","type":"image","variants":[{"url":"\/images\/TimecodeKitCore\/app-target-exported-types.png","traits":["1x","light"]}],"alt":"Exported Types"},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/init(from:propertiesForString:)-1cqhu":{"url":"\/documentation\/timecodekitcore\/timecode\/init(from:propertiesforstring:)-1cqhu","abstract":[{"text":"Decode the content of a ","type":"text"},{"code":"NSItemProvider","type":"codeVoice"},{"type":"text","text":" collection as a new "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","isActive":true,"type":"reference"},{"type":"text","text":" instance."}],"title":"init(from:propertiesForString:)","kind":"symbol","type":"topic","role":"symbol","fragments":[{"text":"init","kind":"identifier"},{"text":"(","kind":"text"},{"text":"from","kind":"externalParam"},{"kind":"text","text":": ["},{"text":"NSItemProvider","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSItemProvider"},{"text":"], ","kind":"text"},{"kind":"externalParam","text":"propertiesForString"},{"kind":"text","text":": "},{"kind":"typeIdentifier","preciseIdentifier":"s:15TimecodeKitCore0A0V","text":"Timecode"},{"text":".","kind":"text"},{"kind":"typeIdentifier","preciseIdentifier":"s:15TimecodeKitCore0A0V10PropertiesV","text":"Properties"},{"text":") ","kind":"text"},{"text":"async","kind":"keyword"},{"kind":"text","text":" "},{"kind":"keyword","text":"throws"}],"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/init(from:propertiesForString:)-1cqhu"},"https://developer.apple.com/documentation/foundation/nsitemprovider":{"identifier":"https:\/\/developer.apple.com\/documentation\/foundation\/nsitemprovider","titleInlineContent":[{"code":"NSItemProvider","type":"codeVoice"}],"type":"link","title":"NSItemProvider","url":"https:\/\/developer.apple.com\/documentation\/foundation\/nsitemprovider"},"doc://TimecodeKitCore/documentation/TimecodeKitCore":{"abstract":[{"text":"Value types and related logic for representing and working with SMPTE\/EBU timecode.","type":"text"}],"type":"topic","kind":"symbol","role":"collection","title":"TimecodeKitCore","url":"\/documentation\/timecodekitcore","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore"},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/copyUTTypes":{"type":"topic","kind":"symbol","abstract":[{"text":"All supported UT Types for copying to the pasteboard or dragging an item.","type":"text"}],"title":"copyUTTypes","role":"symbol","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/copyUTTypes","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"copyUTTypes","kind":"identifier"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:22UniformTypeIdentifiers6UTTypeV","text":"UTType","kind":"typeIdentifier"},{"text":"]","kind":"text"}],"url":"\/documentation\/timecodekitcore\/timecode\/copyuttypes"},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/pasteUTTypes":{"url":"\/documentation\/timecodekitcore\/timecode\/pasteuttypes","title":"pasteUTTypes","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/pasteUTTypes","kind":"symbol","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"keyword","text":"let"},{"text":" ","kind":"text"},{"kind":"identifier","text":"pasteUTTypes"},{"text":": [","kind":"text"},{"preciseIdentifier":"s:22UniformTypeIdentifiers6UTTypeV","text":"UTType","kind":"typeIdentifier"},{"kind":"text","text":"]"}],"role":"symbol","type":"topic","abstract":[{"type":"text","text":"All supported UT Types for pasting from the pasteboard or dropping a dragged item."}]},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/init(from:propertiesForString:)-7hl9l":{"url":"\/documentation\/timecodekitcore\/timecode\/init(from:propertiesforstring:)-7hl9l","abstract":[{"type":"text","text":"Decode the content of an "},{"type":"codeVoice","code":"NSItemProvider"},{"type":"text","text":" as a new "},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","type":"reference","isActive":true},{"type":"text","text":" instance."}],"title":"init(from:propertiesForString:)","kind":"symbol","type":"topic","role":"symbol","fragments":[{"text":"init","kind":"identifier"},{"kind":"text","text":"("},{"kind":"externalParam","text":"from"},{"kind":"text","text":": "},{"text":"NSItemProvider","kind":"typeIdentifier","preciseIdentifier":"c:objc(cs)NSItemProvider"},{"text":", ","kind":"text"},{"kind":"externalParam","text":"propertiesForString"},{"text":": ","kind":"text"},{"preciseIdentifier":"s:15TimecodeKitCore0A0V","text":"Timecode","kind":"typeIdentifier"},{"text":".","kind":"text"},{"kind":"typeIdentifier","text":"Properties","preciseIdentifier":"s:15TimecodeKitCore0A0V10PropertiesV"},{"kind":"text","text":") "},{"kind":"keyword","text":"async"},{"text":" ","kind":"text"},{"text":"throws","kind":"keyword"}],"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/init(from:propertiesForString:)-7hl9l"},"doc://TimecodeKitCore/documentation/TimecodeKitCore/Timecode/textUTType":{"url":"\/documentation\/timecodekitcore\/timecode\/textuttype","fragments":[{"text":"static","kind":"keyword"},{"text":" ","kind":"text"},{"text":"let","kind":"keyword"},{"text":" ","kind":"text"},{"text":"textUTType","kind":"identifier"},{"kind":"text","text":": "},{"preciseIdentifier":"s:22UniformTypeIdentifiers6UTTypeV","kind":"typeIdentifier","text":"UTType"}],"kind":"symbol","abstract":[{"text":"The UT Type used to encode ","type":"text"},{"identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode","isActive":true,"type":"reference"},{"text":" as plain text.","type":"text"}],"title":"textUTType","identifier":"doc:\/\/TimecodeKitCore\/documentation\/TimecodeKitCore\/Timecode\/textUTType","type":"topic","role":"symbol"}}}